<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html
><head
><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
><title
>A succinct method for sharing Arc libraries.</title
><style type="text/css"
>


body {
  font-family: verdana;
  margin-left: 2em;
}

p, ol, ul {
  width: 40em;
}

li {
  margin-bottom: 0.5em;
}

pre, code {
  font-family: courier;
}

td {
  vertical-align: top;
  padding: 0 1em 0.5em 0;
}

table.code {
  border-collapse: collapse;
}

table.code td {
  padding: 5px 1em;
  font-family: courier, monospace;
  border: 1px solid #ddd;
}

table.code td.arrow {
  border: none;
  padding: 0 1em;
  font-family: verdana;
}

table.code td.spacer {
  border: none;
  padding: 0;
}


</style
></head
><body
><a href="/"
>Catâ€™s hacks</a
>:<h1
>lib</h1
><p
><i
>A succinct method for sharing Arc libraries.</i
></p
><h2
>Synopsis</h2
><p
>A call such as</p
><blockquote
><pre
>(lib &#34;http://catdancer.github.com/erp.arc&#34;)</pre
></blockquote
><p
>does the following:</p
><ol
><li
>If the library file has already been loaded into Arc, nothing happens. (Program A can include libraries B and C, and library B can include library C, without C getting loaded twice).</li
><li
>If the library file is already present in the <code>lib</code> directory, and it has a &ldquo;<code>.arc</code>&rdquo; extension, it is loaded into Arc.<ul style="margin-top: 0.5em;"
><li
>As fast as <code>load</code>: No network calls are made.</li
><li
>No surprises: By design, calling <code>lib</code> by itself does not check if a newer version of the library is available.  You decide when and if you want to upgrade.</li
><li
>Easy override: put your own version of the library file in the lib directory, and it will be used instead of the remote version.</li
></ul
></li
><li
>If the library isn't in the <code>lib</code> directory yet, it is downloaded from the remote site, and then, if it also has a &ldquo;<code>.arc</code>&rdquo; extension, loaded into Arc.<ul style="margin-top: 0.5em;"
><li
>No clashes: files are stored in the <code>lib</code> directory using the same directory structure as the URL.  (&ldquo;http://catdancer.github.com/erp.arc&rdquo; is stored in &ldquo;lib/catdancer.github.com/erp.arc&rdquo;).</li
><li
>Non-Arc files: Does your library need images or other non-Arc language files available?  Simply call <code>(lib "http://yoururl/other-file")</code>, and <code>other-url</code> will be available in the known location in the <code>lib</code> directory.</li
></ul
></li
></ol
><p style="margin-top: 1.5em;"
><code>(lib-new)</code></p
><div style="margin-left: 2em"
>Prints out a list of URL's that have a new version available or have been overridden.  (That is, it prints out those URL's for which the file in the <code>lib</code> directory is different than the file at the URL).</div
><p style="margin-top: 1.5em;"
><code
>(lib-fetch <i
>url</i
>)</code
></p
><p style="margin-left: 2em;"
>Unconditionally downloads the URL and stores it in the <code>lib</code> directory.</p
><h2
>Rationale</h2
><p
>In other languagues, sharing code is complicated: you have to package it up, and then publish your package, and users have to download and install it, and then load it their program...</p
><p
>Following Paul Graham&rsquo;s &ldquo;<a href="http://paulgraham.com/power.html">Succinctness is Power</a>&rdquo; hypothesis, I tried to imagine what could be the quickest possible way to share and use Arc code.</p
><h2
>Prerequisites</h2
><ul
><li
>My <a href="mz.html">mz</a> patch to Arc.</li
><li
><a href="http://www.gnu.org/software/wget/">wget<a/><div style="margin-left: 1em;"
>Debian: <code>apt-get install wget</code><br
>Gentoo: <code>emerge net-misc/wget</div
></li
></ul
><h2
>Bugs</h2
><ul
><li
>Windows is not supported.</li
><li
>Relies on having <code>wget</code> installed.</li
></ul
>Have fixes?  Send them to me on <a href="http://github.com/CatDancer/arc-lib/tree">GitHub</a>.<h2
>Get This Hack</h2
><ul
><li
>lib.arc (<a href="http://catdancer.github.com/lib.arc.txt"
>view</a
>) (<a href="http://catdancer.github.com/lib.arc"
>download</a
>)</li
><li
><a href="http://github.com/CatDancer/arc-lib/tree"
>repository on GitHub</a
></li
></ul
><h2
>Comment</h2
><a href="http://arclanguage.org/item?id=8889"
>Comment</a
> in the Arc Forum.<h2
>License</h2
><p
><a href="http://creativecommons.org/licenses/publicdomain/"
>public domain</a
></p
></body
></html
>
